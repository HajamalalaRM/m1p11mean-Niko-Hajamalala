
<div class="row">
   <div class="col-md-12 grid-margin stretch-card">
      <div class="card">
         <div class="card-body">
            <h5 class="card-title">List of your preferences</h5>
            <p class="card-description">There are the our preferences</p>
            
            <div class="table-responsive pt-3">

               <table class="table table-bordered">
               <thead>
                  <tr>
                     <th>Nom</th>
                     <th>Email</th>
                     <th>Contact</th>
                     <th>Rôle</th>
                     <th>Services prefer</th>
                     <th>Employe prefer</th>
                     <th style="text-align:center;">Options</th>
                  </tr>
               </thead>
               <tbody>
                  <tr *ngFor="let user of users">
                     <td>{{ user.name }}</td>
                     <td>{{ user.email }}</td>
                     <td>{{ user.contact }}</td>
                     <td>
                        {{ user.role === 1 ? 'Client' : user.role === 2 ? 'Employé' : user.role === 3 ? 'Manager' : 'Unknown' }}
                     </td>
                     <td>
                        <ul *ngFor="let service of user.preferred_services">
                           <li>{{ service.name }}
                              <button *ngIf="isSubmitDeleteServPref" (click)="deleteServicePrefered(service._id)" style="color: red; font-weight:bold; float: right;"> x </button>
                           </li>
                        </ul>
                     </td>
                     <td>
                        <ul *ngFor="let emp of user.employee_users">
                           <li>{{ emp.name }}
                              <button *ngIf="isSubmitDeleteEmpPref" (click)="deleteEmpPrefered(emp._id)" style="color: red; font-weight:bold; float: right;"> x </button>
                           </li>
                        </ul>
                     </td>
                     <td style="text-align:center;">
                        <div class="btn-group" role="group" aria-label="Basic example">
                           <button *ngIf="isSubmitAddServPref" disabled (click)="addServicePreference()" type="button" class="btn btn-success">New</button>&nbsp;
                           <button *ngIf="isSubmitAddServPref===false" (click)="addServicePreference()" type="button" class="btn btn-success">New</button>
                           <button *ngIf="isSubmitDeleteServPref" disabled (click)="deletePreferenceService()" type="button" class="btn btn-danger">delete</button>&nbsp;
                           <button *ngIf="isSubmitDeleteServPref===false" (click)="deletePreferenceService()" type="button" class="btn btn-danger">delete</button>
                        </div>
                     </td>
                  </tr>
               </tbody>
            </table>

            <div class="row">
               <div class="col-md-1"></div>
               <div *ngIf="isSubmitAddServPref" class="col-md-4">
                  <label for="exampleFormControlSelect1">There are the name of service :</label>
                  <select class="form-control" id="exampleFormControlSelect1"
                     #selectElement 
                     name="serviceId" 
                     (change)="onChangeServ(selectElement.value)"
                  >
                     <option value="">Choose the service...</option>
                     <option
                        *ngFor="let service of services" 
                        [value]="service['_id']"  
                        name="serviceId" 
                     > {{ service.name }} </option>
                  </select>
                  <br>
                  <div class="row" style="float: right;">
                     <div>
                        <input (click)="addServicePrefered()" type="submit" class="btn btn-success mr-2" value="Add service prefer">
                        <button (click)="cancelAddServicePreference()" class="btn btn-light">Cancel</button>
                     </div>
                  </div>
               </div>
               <div class="col-md-2"></div>
               <div *ngIf="isSubmitAddEmpPref" class="col-md-4">
                  <label for="exampleFormControlSelect2">There are the name of employe :</label>
                  <select class="form-control" id="exampleFormControlSelect2"
                  #selectElementEmploy 
                  name="employeId" 
                     (change)="onChangeEmp(selectElementEmploy.value)"
                  >
                     <option value="">Choose the employe...</option>
                     <option
                        *ngFor="let employ of employes" 
                        [value]="employ._id"  
                        name="employeId" 
                        > {{ employ.name }} </option>
                     </select>
                     <br>
                     <div class="row" style="float: right;">
                        <div>
                           <input (click)="addEmployePrefered()" type="submit" class="btn btn-success mr-2" value="Add employe prefer">
                           <button (click)="cancelAddEmployePreference()" class="btn btn-light">Cancel</button>
                        </div>
                     </div>
                  </div>
               </div>
               <br/><br/>
               <div class="col-md-1"></div>
               
            </div>
         </div>
      </div>
   </div>
</div>